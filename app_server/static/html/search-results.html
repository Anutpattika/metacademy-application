{% extends "base.html" %}
{% load staticfiles %}

{% block targetblank %}
{% endblock %}

{% block header-search %}    
{% endblock %}

{% block title %}
{{search_query}} - Metacademy Search
{% endblock %}

{% block extra-css %}
<link rel="stylesheet" href="{% static "css/search.css" %}"> </rel>
{% endblock %}

{% block main %} 


<div class="search-res-wrapper">
  <div class="sres-search-wrapper">
    <a href="/"> <img id="sres-search-logo" class="mlogo" src="{% static "images/banner2-meta.png" %}" /> </a>
    <div class="search-els">
      <input type="text" class="searchbox" id="sres-search-input" placeholder="search" value="{{search_query}}" autocomplete="off" autocapitalize="off" tabindex="1" spellcheck="off">
    </div>
  </div>

  {% if page.object_list|length %}
  <div class="search-info">
    -We found {{ page.object_list|length }} relevant roadmap{% if page.object_list|length > 1 %}s{% endif %}-
  </div>
  <div class="search-res">
    <ol class="search-res-list">
      {% for sobj in page.object_list %}
      <li class="search-res-li">
        <h3 class="search-res-title">
          <a class="search-res-link internal-link" href="{{ sobj.object.get_absolute_url }}"> {{sobj.object.title}} </a>
        </h3>
        <div class="search-res-description">
          <p>
            author: {{sobj.object.author}}
          </p>
          <p>
            {{sobj.object.blurb}}
          </p>
        </div>
      </li>
      {% endfor %}
    </ol>
  </div>
{% endif %}

<div class="search-info">
  -We found {{ concepts_search_data|length }} relevant concept{% if concepts_search_data|length > 1 %}s{% endif %}-
</div>
<div class="search-res">
  <ol class="search-res-list">
    {% if not concepts_search_data|length %}

    <div class="nosearch-message">
      Perhaps check out our <a href="/list" class="internal-link">full list of concepts</a>
    </div>
    <div class="sidenote"> (note: we're a young project and currently focus on machine learning and statistics)</span> <!-- TODO add "contribute content" link here -->
<div>
  {% endif %}

  {% for sobj in concepts_search_data %}
  <li class="search-res-li">
    <h3 class="search-res-title">
      <a class="search-res-link internal-link" href="{% url 'graphs:concepts'%}{{sobj.tag }}"> {{sobj.title}} </a>
    </h3>
    <div class="search-res-description">
      {{sobj.summary}}
    </div>
  </li>
  {% endfor %}
</ol>
</div>
{% endblock %}
